<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BIOLOGY SMART-HUB 2.0</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

    @media print {
      .no-print { display: none !important; }
      body { background: #fff !important; color: #111827 !important; }
      #printArea { display: block !important; }
    }

    /* "–ü–∞–ø–µ—Ä–æ–≤–∞" —Å—Ç–æ—Ä—ñ–Ω–∫–∞ */
    .paper {
      background: #ffffff;
      color: #111827;
      border: 1px solid #e5e7eb;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      overflow: hidden;
    }
    .paper-header {
      padding: 18px 18px 10px 18px;
      border-bottom: 1px solid #e5e7eb;
      background: linear-gradient(180deg, #fff 0%, #fafafa 100%);
    }
    .paper-title {
      font-weight: 800;
      letter-spacing: .2px;
      font-size: 18px;
      line-height: 1.2;
    }
    .paper-sub {
      margin-top: 6px;
      color: #6b7280;
      font-size: 12px;
    }

    /* –õ—ñ–Ω—ñ–π–æ–≤–∞–Ω–∏–π —Ñ–æ–Ω */
    .lined {
      position: relative;
      background:
        repeating-linear-gradient(
          to bottom,
          #ffffff 0px,
          #ffffff 26px,
          #eef2ff 27px
        );
    }
    .lined::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 46px;
      height: 100%;
      background: linear-gradient(90deg, rgba(244,63,94,.10), rgba(244,63,94,0));
      border-right: 2px solid rgba(244,63,94,.35);
      pointer-events: none;
    }

    /* –°–µ–∫—Ü—ñ—è –∑–æ—à–∏—Ç–∞ (–Ω–µ "–±–ª–∞–Ω–∫", –∞ —è–∫ —É –¥—Ä—É–∫–æ–≤–∞–Ω–æ–º—É –∑–æ—à–∏—Ç—ñ) */
    .note-section {
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(148,163,184,.55);
      border-radius: 16px;
      padding: 12px;
    }
    .note-label {
      font-size: 12px;
      color: #334155;
      font-weight: 800;
      letter-spacing: .06em;
      text-transform: uppercase;
    }
    .note-hint {
      margin-top: 4px;
      color: #64748b;
      font-size: 12px;
      line-height: 1.35;
    }

    /* –ü–æ–ª—è –≤–≤–æ–¥—É ‚Äì –±—ñ–ª—å—à "–∑–æ—à–∏—Ç–Ω—ñ": –±–µ–∑ —à—Ç—Ä–∏—Ö-–ø—É–Ω–∫—Ç–∏—Ä—É, –±–µ–∑ –±–ª–∞–Ω–∫–æ–≤–∏—Ö —Ä–∞–º–æ–∫ */
    .paper textarea, .paper input, .paper select {
      background: rgba(255,255,255,.92) !important;
      color: #111827 !important;
      border: 1px solid rgba(148,163,184,.65) !important;
      border-radius: 14px !important;
      outline: none;
    }
    .paper textarea:focus, .paper input:focus, .paper select:focus {
      box-shadow: 0 0 0 3px rgba(59,130,246,.18);
      border-color: rgba(59,130,246,.65) !important;
    }

    .btn-paper {
      background: #111827;
      color: #fff;
      border-radius: 14px;
      padding: 10px 14px;
      font-weight: 800;
    }
    .btn-paper:hover { background: #0b1220; }

    .btn-light {
      border: 1px solid #cbd5e1;
      background: #fff;
      color: #0f172a;
      border-radius: 14px;
      padding: 10px 14px;
      font-weight: 800;
    }
    .btn-light:hover { background: #f8fafc; }

    .paper-footer {
      padding: 12px 18px;
      border-top: 1px solid #e5e7eb;
      background: #fafafa;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      font-size: 12px;
      color: #6b7280;
      flex-wrap: wrap;
    }

    /* –¢—Ä–æ—Ö–∏ –∫—Ä–∞—â–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –¥–ª—è textarea –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    textarea { font-size: 14px; line-height: 1.5; }
  </style>
</head>

<body class="bg-slate-950 text-slate-100">
  <div id="app" class="min-h-screen"></div>
  <section id="printArea" class="hidden"></section>

  <script>
    // -------------------------
    // 0) –î–∞–Ω—ñ
    // -------------------------
    const OPP_LIST = [
      "–í–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ —ñ –ø–µ—Ä–µ—Ä–æ–±–∫–∞ –ø—Ä–æ–¥—É–∫—Ü—ñ—ó —Ä–æ—Å–ª–∏–Ω–Ω–∏—Ü—Ç–≤–∞",
      "–ó–µ–º–ª–µ–≤–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è",
      "–ó–µ–ª–µ–Ω–µ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ —ñ —Å–∞–¥–æ–≤–æ-–ø–∞—Ä–∫–æ–≤–µ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤–æ",
      "–§—ñ–Ω–∞–Ω—Å–∏ —ñ –∫—Ä–µ–¥–∏—Ç",
      "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∏–π –æ–±–ª—ñ–∫",
      "–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞",
      "–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä—ñ—è"
    ];

    const NOTEBOOK_LM = "https://notebooklm.google.com/";

    const MODULES = [
      { id:"m1",  title:"–ú–æ–¥—É–ª—å 1. –í—Å—Ç—É–ø –¥–æ –±—ñ–æ–ª–æ–≥—ñ—ó. –í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∂–∏–≤–æ–≥–æ —Ç–∞ –º–µ—Ç–æ–¥–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è", presentation:"https://example.com/biology-smart-hub/presentations/m1", notebook: NOTEBOOK_LM },
      { id:"m2",  title:"–ú–æ–¥—É–ª—å 2. –ö–ª—ñ—Ç–∏–Ω–∞ ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ-—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –æ–¥–∏–Ω–∏—Ü—è –∂–∏–≤–æ–≥–æ. –ü–æ–¥—ñ–ª –∫–ª—ñ—Ç–∏–Ω", presentation:"https://example.com/biology-smart-hub/presentations/m2", notebook: NOTEBOOK_LM },
      { id:"m3",  title:"–ú–æ–¥—É–ª—å 3. –•—ñ–º—ñ—á–Ω–∏–π —Å–∫–ª–∞–¥ –∫–ª—ñ—Ç–∏–Ω–∏. –§–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑ —ñ –∫–ª—ñ—Ç–∏–Ω–Ω–µ –¥–∏—Ö–∞–Ω–Ω—è", presentation:"https://example.com/biology-smart-hub/presentations/m3", notebook: NOTEBOOK_LM },
      { id:"m4",  title:"–ú–æ–¥—É–ª—å 4. –û–¥–Ω–æ–∫–ª—ñ—Ç–∏–Ω–Ω—ñ –æ—Ä–≥–∞–Ω—ñ–∑–º–∏ —Ç–∞ –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –±–∞–≥–∞—Ç–æ–∫–ª—ñ—Ç–∏–Ω–Ω–æ—Å—Ç—ñ", presentation:"https://example.com/biology-smart-hub/presentations/m4", notebook: NOTEBOOK_LM },
      { id:"m5",  title:"–ú–æ–¥—É–ª—å 5. –†–æ—Å–ª–∏–Ω–∞ —è–∫ —Ü—ñ–ª—ñ—Å–Ω–∏–π –æ—Ä–≥–∞–Ω—ñ–∑–º. –¢–∫–∞–Ω–∏–Ω–∏ —Ä–æ—Å–ª–∏–Ω", presentation:"https://example.com/biology-smart-hub/presentations/m5", notebook: NOTEBOOK_LM },
      { id:"m6",  title:"–ú–æ–¥—É–ª—å 6. –ö–æ—Ä—ñ–Ω—å ‚Äì –≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω–∏–π –æ—Ä–≥–∞–Ω —Ä–æ—Å–ª–∏–Ω–∏. –ë—É–¥–æ–≤–∞ —ñ –≤–∏–¥–æ–∑–º—ñ–Ω–∏", presentation:"https://example.com/biology-smart-hub/presentations/m6", notebook: NOTEBOOK_LM },
      { id:"m7",  title:"–ú–æ–¥—É–ª—å 7. –ü–∞–≥—ñ–Ω: –±—É–¥–æ–≤–∞, —Ä–æ–∑–≤–∏—Ç–æ–∫ —ñ –≤–∏–¥–æ–∑–º—ñ–Ω–∏", presentation:"https://example.com/biology-smart-hub/presentations/m7", notebook: NOTEBOOK_LM },
      { id:"m8",  title:"–ú–æ–¥—É–ª—å 8. –õ–∏—Å—Ç–æ–∫. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Ä–µ—á–æ–≤–∏–Ω —ñ —Ä—É—Ö–∏ —Ä–æ—Å–ª–∏–Ω", presentation:"https://example.com/biology-smart-hub/presentations/m8", notebook: NOTEBOOK_LM },
      { id:"m9",  title:"–ú–æ–¥—É–ª—å 9. –ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ñ –æ—Ä–≥–∞–Ω–∏ —Ä–æ—Å–ª–∏–Ω: –∫–≤—ñ—Ç–∫–∞, –Ω–∞—Å—ñ–Ω–∏–Ω–∞, –ø–ª—ñ–¥. –ó–∞–ø–∏–ª–µ–Ω–Ω—è —ñ –∑–∞–ø–ª—ñ–¥–Ω–µ–Ω–Ω—è", presentation:"https://example.com/biology-smart-hub/presentations/m9", notebook: NOTEBOOK_LM },
      { id:"m10", title:"–ú–æ–¥—É–ª—å 10. –†–æ–∑–º–Ω–æ–∂–µ–Ω–Ω—è —Ä–æ—Å–ª–∏–Ω: —Å—Ç–∞—Ç–µ–≤–µ, –Ω–µ—Å—Ç–∞—Ç–µ–≤–µ —ñ –≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω–µ", presentation:"https://example.com/biology-smart-hub/presentations/m10", notebook: NOTEBOOK_LM }
    ];

    // -------------------------
    // 1) –°—Ç–∞–Ω (localStorage)
    // -------------------------
    const KEY = "biology_smart_hub_v2_state";
    const defaultState = () => ({
      profile: { studentName:"", group:"", opp: OPP_LIST[0] },
      progress: {},   // { m1: {done:true, date:"YYYY-MM-DD", score: 12} }
      notes: {},      // { m1: {goal:"", equipment:"", steps:"", obs:"", concl:"", self:""} }
      promptNotes: {} // { "m1|–û–ü–ü": "..." }
    });

    function loadState() {
      try {
        const raw = localStorage.getItem(KEY);
        const st = raw ? JSON.parse(raw) : defaultState();
        // –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑—ñ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É notes: string -> object
        for (const m of MODULES) {
          const v = st.notes?.[m.id];
          if (typeof v === "string") {
            st.notes[m.id] = {
              goal: "",
              equipment: "",
              steps: "",
              obs: v,
              concl: "",
              self: ""
            };
          }
          if (!v) {
            st.notes[m.id] = st.notes[m.id] || { goal:"", equipment:"", steps:"", obs:"", concl:"", self:"" };
          }
        }
        return st;
      } catch {
        const st = defaultState();
        return st;
      }
    }
    function saveState() { localStorage.setItem(KEY, JSON.stringify(state)); }
    let state = loadState();

    // -------------------------
    // 2) –ü—Ä–æ–º–ø—Ç–∏ (–ú–æ–¥—É–ª—å √ó –û–ü–ü)
    // -------------------------
    function promptExplain(moduleTitle, opp) {
      return `–ü–æ—è—Å–Ω–∏ —Ç–µ–º—É "${moduleTitle}" –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –û–ü–ü "${opp}". 
–î–∞–π 3 –ø—Ä–∏–∫–ª–∞–¥–∏ –∑ –∞–≥—Ä–∞—Ä–Ω–æ—ó —Å—Ñ–µ—Ä–∏/–≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞. 
–ù–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ - 5 –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞–Ω—å —ñ –∫–æ—Ä–æ—Ç–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.`;
    }
    function promptPracticeCase(moduleTitle, opp) {
      return `–°—Ç–≤–æ—Ä–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏–π –∫–µ–π—Å –¥–æ —Ç–µ–º–∏ "${moduleTitle}" –¥–ª—è –û–ü–ü "${opp}".
1) –°–∏—Ç—É–∞—Ü—ñ—è (—Ä–µ–∞–ª—å–Ω–∞/–ø—Ä–∞–≤–¥–æ–ø–æ–¥—ñ–±–Ω–∞ –¥–ª—è –∞–≥—Ä–æ—Å—Ñ–µ—Ä–∏)
2) –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
3) –ó–∞–≤–¥–∞–Ω–Ω—è (5 –ø—É–Ω–∫—Ç—ñ–≤)
4) –ö—Ä–∏—Ç–µ—Ä—ñ—ó –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è –Ω–∞ 12 –±–∞–ª—ñ–≤ (4/8/12)
5) –ó—Ä–∞–∑–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.`;
    }
    function promptFlashcards(moduleTitle, opp) {
      return `–ó—Ä–æ–±–∏ 20 –∫–∞—Ä—Ç–æ–∫ –¥–æ —Ç–µ–º–∏ "${moduleTitle}" –¥–ª—è –û–ü–ü "${opp}": 
—Ç–µ—Ä–º—ñ–Ω - –ø—Ä–æ—Å—Ç–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è - –ø—Ä–∏–∫–ª–∞–¥ (1 —Ä—è–¥–æ–∫). –ë–µ–∑ –≤–æ–¥–∏.`;
    }
    function getPrompts(moduleId, opp) {
      const m = MODULES.find(x => x.id === moduleId);
      const title = m ? m.title : moduleId;
      return [
        { id:"p1", title:"–ü–æ—è—Å–Ω–µ–Ω–Ω—è –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –ø—ñ–¥ –û–ü–ü", text: promptExplain(title, opp) },
        { id:"p2", title:"–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –∫–µ–π—Å –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏", text: promptPracticeCase(title, opp) },
        { id:"p3", title:"–ö–∞—Ä—Ç–∫–∏ —Ç–µ—Ä–º—ñ–Ω—ñ–≤ (–≥–ª–æ—Å–∞—Ä—ñ–π)", text: promptFlashcards(title, opp) }
      ];
    }

    // -------------------------
    // 3) –£—Ç–∏–ª—ñ—Ç–∏
    // -------------------------
    function escapeHtml(str) {
      return String(str ?? "")
        .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
        .replaceAll('"',"&quot;").replaceAll("'","&#039;");
    }
    function clampInt(v, min, max) {
      const n = parseInt(v, 10);
      if (Number.isNaN(n)) return null;
      return Math.max(min, Math.min(max, n));
    }
    function todayISO() { return new Date().toISOString().slice(0,10); }

    async function copyText(text) {
      try { await navigator.clipboard.writeText(text); alert("–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ."); }
      catch { alert("–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏. –°–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É."); }
    }

    // -------------------------
    // 4) UI helpers
    // -------------------------
    function layout(title, content) {
      return `
      <div class="no-print">
        <header class="border-b border-slate-800 bg-slate-950/70 backdrop-blur sticky top-0 z-50">
          <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between gap-3">
            <div>
              <div class="text-xs text-slate-300">–Ü–Ω–Ω–æ–≤–∞—Ü—ñ–π–Ω–∞ —Ü–∏—Ñ—Ä–æ–≤–∞ –µ–∫–æ—Å–∏—Å—Ç–µ–º–∞</div>
              <h1 class="text-lg sm:text-xl font-bold">${escapeHtml(title)}</h1>
            </div>
            <div class="flex flex-wrap items-center gap-2">
              <a href="#/dashboard" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm">–ü–∞–Ω–µ–ª—å</a>
              <a href="#/modules" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm">–ú–æ–¥—É–ª—ñ</a>
              <a href="#/workbook" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm">–ó–æ—à–∏—Ç</a>
              <a href="#/prompts" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm">–ü—Ä–æ–º–ø—Ç–∏</a>
              <a href="#/export" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-sm font-semibold">–ï–∫—Å–ø–æ—Ä—Ç</a>
            </div>
          </div>
        </header>
      </div>

      <main class="max-w-6xl mx-auto px-4 py-6">
        ${content}
      </main>
      `;
    }

    function card(title, body, footer="") {
      return `
      <section class="rounded-2xl border border-slate-800 bg-slate-900/40 p-4 shadow">
        <h3 class="font-semibold text-base">${escapeHtml(title)}</h3>
        <div class="mt-2 text-slate-200 text-sm leading-relaxed">${body}</div>
        ${footer ? `<div class="mt-3 pt-3 border-t border-slate-800 text-sm">${footer}</div>` : ""}
      </section>`;
    }

    function progressSummary() {
      const total = MODULES.length;
      const done = MODULES.filter(m => state.progress[m.id]?.done).length;
      const pct = Math.round((done / Math.max(total,1)) * 100);
      return { total, done, pct };
    }

    // -------------------------
    // 5) Pages
    // -------------------------
    function dashboardPage() {
      const p = progressSummary();

      const profileBody = `
        <label class="block mt-2">–ü–Ü–ë
          <input id="studentName" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2"
                 value="${escapeHtml(state.profile.studentName)}" placeholder="–ù–∞–ø—Ä., –Ü–≤–∞–Ω–µ–Ω–∫–æ –Ü–≤–∞–Ω" />
        </label>

        <label class="block mt-3">–ì—Ä—É–ø–∞
          <input id="group" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2"
                 value="${escapeHtml(state.profile.group)}" placeholder="–ù–∞–ø—Ä., 21–∞ / 11–∑ / 31—Ñ" />
        </label>

        <label class="block mt-3">–û–ü–ü
          <select id="opp" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2">
            ${OPP_LIST.map(o => `<option ${state.profile.opp===o?"selected":""}>${escapeHtml(o)}</option>`).join("")}
          </select>
        </label>
      `;

      const progBody = `
        <div class="text-3xl font-bold">${p.pct}%</div>
        <div class="mt-2 text-slate-300">–í–∏–∫–æ–Ω–∞–Ω–æ –º–æ–¥—É–ª—ñ–≤: <b>${p.done}</b> –∑ <b>${p.total}</b></div>
        <div class="mt-3 h-3 rounded-full bg-slate-800 overflow-hidden">
          <div class="h-3 bg-emerald-600" style="width:${p.pct}%"></div>
        </div>
      `;

      const ideaBody = `
        –£ –∫–æ–∂–Ω–æ–º—É –º–æ–¥—É–ª—ñ: –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è, NotebookLM, –∑–æ—à–∏—Ç (—è–∫ –¥—Ä—É–∫–æ–≤–∞–Ω–∏–π) —ñ –ø—Ä–æ–º–ø—Ç–∏ –®–Ü –≤ —Ä–æ–∑—Ä—ñ–∑—ñ –û–ü–ü.
        –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ - –ø—Ä–∞—Ü—é—î —ñ –±–µ–∑ ‚Äú—Ö–º–∞—Ä‚Äù.
      `;

      const html = layout("BIOLOGY SMART-HUB 2.0", `
        <div class="grid md:grid-cols-2 gap-4">
          ${card("–ü—Ä–æ—Ñ—ñ–ª—å", profileBody, `<button id="saveProfile" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 font-semibold">–ó–±–µ—Ä–µ–≥—Ç–∏</button>`)}
          ${card("–ü—Ä–æ–≥—Ä–µ—Å", progBody, `<a class="underline" href="#/modules">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –º–æ–¥—É–ª—ñ–≤</a>`)}
        </div>
        <div class="mt-4">
          ${card("–ö–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ –ª–æ–≥—ñ–∫—É —Ö–∞–±—É", ideaBody)}
        </div>
      `);

      mount(html);

      document.getElementById("saveProfile").addEventListener("click", () => {
        state.profile.studentName = document.getElementById("studentName").value.trim();
        state.profile.group = document.getElementById("group").value.trim();
        state.profile.opp = document.getElementById("opp").value;
        saveState();
        alert("–ó–±–µ—Ä–µ–∂–µ–Ω–æ.");
      });
    }

    function modulesPage() {
      const list = MODULES.map(m => {
        const prog = state.progress[m.id] || { done:false, score:null, date:"" };
        const badge = prog.done
          ? `<span class="text-xs px-2 py-1 rounded bg-emerald-700">–≤–∏–∫–æ–Ω–∞–Ω–æ</span>`
          : `<span class="text-xs px-2 py-1 rounded bg-slate-700">—É —Ä–æ–±–æ—Ç—ñ</span>`;

        return card(
          m.title,
          `
          <div class="flex flex-wrap items-center gap-2 mt-2">
            ${badge}
            <span class="text-slate-300 text-xs">–î–∞—Ç–∞: ${escapeHtml(prog.date || "‚Äî")} ¬∑ –û—Ü—ñ–Ω–∫–∞: ${prog.score ?? "‚Äî"}</span>
          </div>

          <div class="flex flex-wrap items-center gap-3 mt-2">
            <a class="underline" href="#/workbook?m=${m.id}">–ó–æ—à–∏—Ç</a>
            <a class="underline" href="#/prompts?m=${m.id}">–ü—Ä–æ–º–ø—Ç–∏</a>
            <a class="underline" href="${m.presentation}" target="_blank" rel="noopener">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è</a>
            <a class="underline" href="${m.notebook}" target="_blank" rel="noopener">NotebookLM</a>
          </div>
          `,
          `
          <div class="flex flex-wrap items-center gap-2">
            <button data-done="${m.id}" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700">
              –ü–æ–∑–Ω–∞—á–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
            </button>
          </div>
          `
        );
      }).join("");

      mount(layout("–ú–æ–¥—É–ª—ñ", `<div class="space-y-4">${list}</div>`));

      document.querySelectorAll("button[data-done]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-done");
          const date = prompt("–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (YYYY-MM-DD):", state.progress[id]?.date || todayISO()) || "";
          const scoreRaw = prompt("–û—Ü—ñ–Ω–∫–∞ (1-12), –º–æ–∂–Ω–∞ –ø–æ—Ä–æ–∂–Ω—å–æ:", state.progress[id]?.score ?? "") || "";
          const score = scoreRaw.trim() ? clampInt(scoreRaw, 1, 12) : null;

          state.progress[id] = { done:true, date: date.trim(), score };
          saveState();
          modulesPage();
        });
      });
    }

    // ---- helper: —à–≤–∏–¥–∫–∏–π —à–∞–±–ª–æ–Ω –∑–∞–ø–∏—Å—É (—è–∫ —É –¥—Ä—É–∫–æ–≤–∞–Ω–æ–º—É –∑–æ—à–∏—Ç—ñ)
    function templateText(type) {
      if (type === "steps") {
        return `1) –ü—ñ–¥–≥–æ—Ç—É–≤–∞–≤(–ª–∞) –º–∞—Ç–µ—Ä—ñ–∞–ª–∏/–æ–±‚Äô—î–∫—Ç–∏.\n2) –í–∏–∫–æ–Ω–∞–≤(–ª–∞) —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è/–¥—ñ—é.\n3) –ó–∞—Ñ—ñ–∫—Å—É–≤–∞–≤(–ª–∞) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.\n4) –ü–æ—Ä—ñ–≤–Ω—è–≤(–ª–∞) –∑ –æ—á—ñ–∫—É–≤–∞–Ω–∏–º.\n5) –ó—Ä–æ–±–∏–≤(–ª–∞) –≤–∏—Å–Ω–æ–≤–æ–∫.`;
      }
      if (type === "obs") {
        return `–°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è:\n- ...\n- ...\n–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è/—Ñ–∞–∫—Ç–∏:\n- ...\n- ...`;
      }
      if (type === "concl") {
        return `–í–∏—Å–Ω–æ–≤–æ–∫ (1-2 —Ä–µ—á–µ–Ω–Ω—è):\n...`;
      }
      return "";
    }

    function workbookPage() {
      const params = new URLSearchParams((location.hash.split("?")[1] || ""));
      const mid = params.get("m") || MODULES[0].id;
      const module = MODULES.find(x => x.id === mid) || MODULES[0];

      const prog = state.progress[module.id] || { done:false, score:null, date:"" };
      const note = state.notes[module.id] || { goal:"", equipment:"", steps:"", obs:"", concl:"", self:"" };

      const headerInfo = `
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
          <div class="text-sm text-slate-700">
            <b>–ü–Ü–ë:</b> ${escapeHtml(state.profile.studentName || "‚Äî")}
            &nbsp; ¬∑ &nbsp; <b>–ì—Ä—É–ø–∞:</b> ${escapeHtml(state.profile.group || "‚Äî")}
            &nbsp; ¬∑ &nbsp; <b>–û–ü–ü:</b> ${escapeHtml(state.profile.opp || "‚Äî")}
          </div>
          <div class="flex flex-wrap gap-2">
            <a href="${module.presentation}" target="_blank" rel="noopener"
              class="px-3 py-2 rounded-xl bg-blue-700 hover:bg-blue-600 text-white text-sm font-semibold">
              üìë –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è
            </a>
            <a href="${module.notebook}" target="_blank" rel="noopener"
              class="px-3 py-2 rounded-xl bg-purple-700 hover:bg-purple-600 text-white text-sm font-semibold">
              üß† NotebookLM
            </a>
          </div>
        </div>
      `;

      const body = `
        <div class="paper">
          <div class="paper-header">
            <div class="paper-title">–°—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–æ–±–æ—á–æ–≥–æ –∑–æ—à–∏—Ç–∞</div>
            <div class="paper-sub">${escapeHtml(module.title)}</div>
            <div class="mt-3">${headerInfo}</div>
          </div>

          <div class="lined p-4 sm:p-6 space-y-4">
            <!-- –î–∞–Ω—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è -->
            <div class="note-section">
              <div class="note-label">–î–∞–Ω—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</div>
              <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3">
                <label class="block text-sm">
                  –î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
                  <input id="dateDone" type="date" class="mt-1 w-full p-2.5"
                    value="${escapeHtml(prog.date || "")}">
                </label>

                <label class="block text-sm">
                  –û—Ü—ñ–Ω–∫–∞ (1-12)
                  <input id="score" type="number" min="1" max="12" class="mt-1 w-full p-2.5"
                    value="${prog.score ?? ""}" placeholder="1-12">
                </label>
              </div>
              <div class="note-hint">–ü–æ—Ä–∞–¥–∞: —è–∫—â–æ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –∑ –®–Ü - –∑–∞–Ω–æ—Ç—É–π—Ç–µ –≥–æ–ª–æ–≤–Ω—ñ –≤–∏—Å–Ω–æ–≤–∫–∏, –∞ –Ω–µ ‚Äú–≤—Å—é –≤—ñ–¥–ø–æ–≤—ñ–¥—å‚Äù.</div>
            </div>

            <!-- –ó–æ—à–∏—Ç–Ω—ñ —Å–µ–∫—Ü—ñ—ó -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
              <div class="note-section">
                <div class="note-label">–ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏</div>
                <div class="note-hint">–û–¥–Ω–∏–º —Ä–µ—á–µ–Ω–Ω—è–º: —â–æ —Å–∞–º–µ —Ö–æ—Ç—ñ–ª–∏ –∑‚Äô—è—Å—É–≤–∞—Ç–∏/–Ω–∞–≤—á–∏—Ç–∏—Å—å —Ä–æ–±–∏—Ç–∏.</div>
                <textarea id="goal" rows="4" class="mt-2 w-full p-3"
                  placeholder="–ù–∞–ø—Ä.: –í–∏–∑–Ω–∞—á–∏—Ç–∏ ... / –ü–æ—è—Å–Ω–∏—Ç–∏ ... / –ù–∞–≤—á–∏—Ç–∏—Å—å ...">${escapeHtml(note.goal)}</textarea>
              </div>

              <div class="note-section">
                <div class="note-label">–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è / –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</div>
                <div class="note-hint">–°–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ –∫–æ–º—É –∞–±–æ –º–∞—Ä–∫–µ—Ä–∞–º–∏.</div>
                <textarea id="equipment" rows="4" class="mt-2 w-full p-3"
                  placeholder="–õ—É–ø–∞, –º—ñ–∫—Ä–æ—Å–∫–æ–ø (–∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ), –∑—Ä–∞–∑–æ–∫ –ª–∏—Å—Ç–∫–∞...">${escapeHtml(note.equipment)}</textarea>
              </div>
            </div>

            <div class="note-section">
              <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
                <div>
                  <div class="note-label">–•—ñ–¥ —Ä–æ–±–æ—Ç–∏</div>
                  <div class="note-hint">–ö—Ä–æ–∫–∏ 1-5. –ö–æ—Ä–æ—Ç–∫–æ, —è–∫ —É –¥—Ä—É–∫–æ–≤–∞–Ω–æ–º—É –∑–æ—à–∏—Ç—ñ.</div>
                </div>
                <button id="tplSteps" class="btn-light">–í—Å—Ç–∞–≤–∏—Ç–∏ —à–∞–±–ª–æ–Ω</button>
              </div>
              <textarea id="steps" rows="7" class="mt-2 w-full p-3"
                placeholder="1) ...&#10;2) ...&#10;3) ...">${escapeHtml(note.steps)}</textarea>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
              <div class="note-section">
                <div class="flex items-center justify-between gap-2">
                  <div>
                    <div class="note-label">–°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è / —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏</div>
                    <div class="note-hint">–§–∞–∫—Ç–∏, –æ–∑–Ω–∞–∫–∏, –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è.</div>
                  </div>
                  <button id="tplObs" class="btn-light">–®–∞–±–ª–æ–Ω</button>
                </div>
                <textarea id="obs" rows="7" class="mt-2 w-full p-3"
                  placeholder="–°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è: ...">${escapeHtml(note.obs)}</textarea>
              </div>

              <div class="note-section">
                <div class="flex items-center justify-between gap-2">
                  <div>
                    <div class="note-label">–í–∏—Å–Ω–æ–≤–æ–∫</div>
                    <div class="note-hint">1-2 —Ä–µ—á–µ–Ω–Ω—è. –ë–µ–∑ ‚Äú–≤–æ–¥–∏‚Äù.</div>
                  </div>
                  <button id="tplConcl" class="btn-light">–®–∞–±–ª–æ–Ω</button>
                </div>
                <textarea id="concl" rows="7" class="mt-2 w-full p-3"
                  placeholder="–í–∏—Å–Ω–æ–≤–æ–∫: ...">${escapeHtml(note.concl)}</textarea>
              </div>
            </div>

            <div class="note-section">
              <div class="note-label">–°–∞–º–æ–æ—Ü—ñ–Ω–∫–∞ / —â–æ –±—É–ª–æ —Å–∫–ª–∞–¥–Ω–æ</div>
              <div class="note-hint">–ö–æ—Ä–æ—Ç–∫–æ: —â–æ –≤–∏–π—à–ª–æ, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏.</div>
              <textarea id="self" rows="4" class="mt-2 w-full p-3"
                placeholder="–ù–∞–ø—Ä.: –≤–∞–∂–∫–æ –±—É–ª–æ..., –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏..., –∑—Ä–æ–∑—É–º—ñ–≤(–ª–∞), —â–æ...">${escapeHtml(note.self)}</textarea>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
              <div class="flex flex-wrap gap-2">
                <button id="saveNote" class="btn-paper">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                <button id="markDone" class="btn-light">–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ</button>
                <a class="btn-light" href="#/prompts?m=${module.id}">–ü—Ä–æ–º–ø—Ç–∏</a>
              </div>

              <div class="flex flex-wrap gap-2">
                ${MODULES.map(m => `
                  <a class="px-3 py-2 rounded-xl border border-slate-300 bg-white hover:bg-slate-50 text-slate-900 font-semibold ${m.id===module.id ? "ring-2 ring-slate-900" : ""}"
                     href="#/workbook?m=${m.id}">
                    ${escapeHtml(m.id.toUpperCase())}
                  </a>`).join("")}
              </div>
            </div>
          </div>

          <div class="paper-footer">
            <div>BIOLOGY SMART-HUB 2.0 - —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–æ—à–∏—Ç–∞</div>
            <div>–ú–æ–¥—É–ª—å: ${escapeHtml(module.id.toUpperCase())}</div>
          </div>
        </div>
      `;

      mount(layout("–ó–æ—à–∏—Ç (—è–∫ –¥—Ä—É–∫–æ–≤–∞–Ω–∏–π)", body));

      // —à–∞–±–ª–æ–Ω–∏
      document.getElementById("tplSteps").addEventListener("click", () => {
        const el = document.getElementById("steps");
        if (!el.value.trim()) el.value = templateText("steps");
        else el.value = el.value + "\n\n" + templateText("steps");
      });
      document.getElementById("tplObs").addEventListener("click", () => {
        const el = document.getElementById("obs");
        if (!el.value.trim()) el.value = templateText("obs");
        else el.value = el.value + "\n\n" + templateText("obs");
      });
      document.getElementById("tplConcl").addEventListener("click", () => {
        const el = document.getElementById("concl");
        if (!el.value.trim()) el.value = templateText("concl");
        else el.value = el.value + "\n\n" + templateText("concl");
      });

      // –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
      document.getElementById("saveNote").addEventListener("click", () => {
        const date = document.getElementById("dateDone").value;
        const scoreRaw = document.getElementById("score").value.trim();

        state.notes[module.id] = {
          goal: document.getElementById("goal").value,
          equipment: document.getElementById("equipment").value,
          steps: document.getElementById("steps").value,
          obs: document.getElementById("obs").value,
          concl: document.getElementById("concl").value,
          self: document.getElementById("self").value
        };

        state.progress[module.id] = {
          ...(state.progress[module.id] || {}),
          date: date || (state.progress[module.id]?.date || ""),
          score: scoreRaw ? clampInt(scoreRaw, 1, 12) : null
        };

        saveState();
        alert("–ó–±–µ—Ä–µ–∂–µ–Ω–æ.");
      });

      document.getElementById("markDone").addEventListener("click", () => {
        state.progress[module.id] = {
          ...(state.progress[module.id] || {}),
          done: true,
          date: state.progress[module.id]?.date || todayISO()
        };
        saveState();
        alert("–ü–æ–∑–Ω–∞—á–µ–Ω–æ —è–∫ –≤–∏–∫–æ–Ω–∞–Ω–æ.");
      });
    }

    function promptsPage() {
      const params = new URLSearchParams((location.hash.split("?")[1] || ""));
      const mid = params.get("m") || MODULES[0].id;

      const moduleOptions = MODULES.map(m => `<option value="${m.id}" ${m.id===mid?"selected":""}>${escapeHtml(m.title)}</option>`).join("");
      const oppOptions = OPP_LIST.map(o => `<option ${state.profile.opp===o?"selected":""}>${escapeHtml(o)}</option>`).join("");

      const prompts = getPrompts(mid, state.profile.opp);
      const key = `${mid}|${state.profile.opp}`;
      const pn = state.promptNotes[key] || "";

      const body = `
        ${card("–í–∏–±—ñ—Ä (–ú–æ–¥—É–ª—å √ó –û–ü–ü)", `
          <div class="grid md:grid-cols-2 gap-3">
            <label class="block">–ú–æ–¥—É–ª—å
              <select id="promptModule" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2">
                ${moduleOptions}
              </select>
            </label>
            <label class="block">–û–ü–ü
              <select id="promptOpp" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2">
                ${oppOptions}
              </select>
            </label>
          </div>
          <div class="mt-3 text-xs text-slate-300">
            –ö–æ–ø—ñ—é—î—Ç–µ –ø—Ä–æ–º–ø—Ç - –ø—Ä–∞—Ü—é—î—Ç–µ - –∫–æ—Ä–æ—Ç–∫–æ –∑–∞–Ω–æ—Ç–æ–≤—É—î—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
          </div>
        `)}

        <div class="space-y-4">
          ${prompts.map(p => card(p.title,
            `<pre class="whitespace-pre-wrap text-sm leading-relaxed">${escapeHtml(p.text)}</pre>`,
            `<button data-copy="${escapeHtml(p.id)}" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 font-semibold">–ö–æ–ø—ñ—é–≤–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç</button>`
          )).join("")}
        </div>

        ${card("–ù–æ—Ç–∞—Ç–∫–∏ –ø—ñ—Å–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –®–Ü", `
          <textarea id="promptNote" rows="6" class="mt-1 w-full rounded-lg bg-slate-950 border border-slate-800 p-2"
            placeholder="–©–æ –∫–æ—Ä–∏—Å–Ω–æ–≥–æ? –©–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –∑–æ—à–∏—Ç?">${escapeHtml(pn)}</textarea>
          <div class="mt-3 flex gap-2">
            <button id="savePromptNote" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
          </div>
        `)}
      `;

      mount(layout("–ü—Ä–æ–º–ø—Ç–∏", body));

      document.getElementById("promptModule").addEventListener("change", (e) => {
        location.hash = `#/prompts?m=${e.target.value}`;
      });

      document.getElementById("promptOpp").addEventListener("change", (e) => {
        state.profile.opp = e.target.value;
        saveState();
        promptsPage();
      });

      document.querySelectorAll("button[data-copy]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-copy");
          const p = prompts.find(x => x.id === id);
          if (p) copyText(p.text);
        });
      });

      document.getElementById("savePromptNote").addEventListener("click", () => {
        state.promptNotes[key] = document.getElementById("promptNote").value;
        saveState();
        alert("–ó–±–µ—Ä–µ–∂–µ–Ω–æ.");
      });
    }

    function exportPage() {
      const profile = state.profile;

      const rows = MODULES.map(m => {
        const p = state.progress[m.id] || {};
        return `
          <tr class="border-b">
            <td class="py-2 pr-3">${escapeHtml(m.title)}</td>
            <td class="py-2 pr-3">${escapeHtml(p.date || "")}</td>
            <td class="py-2 pr-3">${p.score ?? ""}</td>
            <td class="py-2 pr-3">${p.done ? "–¢–∞–∫" : "–ù—ñ"}</td>
          </tr>`;
      }).join("");

      const body = `
        ${card("–ï–∫—Å–ø–æ—Ä—Ç —É PDF (Ctrl+P ‚Üí –ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ PDF)", `
          –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É - —Å—Ñ–æ—Ä–º—É—î—Ç—å—Å—è "—á–∏—Å—Ç–∏–π" –∑–≤—ñ—Ç.
          <div class="mt-3">
            <button id="btnPrint" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 font-semibold">
              –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç —ñ –¥—Ä—É–∫—É–≤–∞—Ç–∏ (PDF)
            </button>
          </div>
        `)}
      `;

      mount(layout("–ï–∫—Å–ø–æ—Ä—Ç / –ó–≤—ñ—Ç", body));

      document.getElementById("btnPrint").addEventListener("click", () => {
        const printArea = document.getElementById("printArea");
        printArea.innerHTML = `
          <div class="p-8 text-slate-900">
            <h2 class="text-2xl font-bold">BIOLOGY SMART-HUB 2.0 ‚Äì –ó–≤—ñ—Ç</h2>
            <div class="mt-3">
              <div><b>–ü–Ü–ë:</b> ${escapeHtml(profile.studentName || "‚Äî")}</div>
              <div><b>–ì—Ä—É–ø–∞:</b> ${escapeHtml(profile.group || "‚Äî")}</div>
              <div><b>–û–ü–ü:</b> ${escapeHtml(profile.opp || "‚Äî")}</div>
            </div>

            <h3 class="mt-6 text-lg font-semibold">–ó–≤–µ–¥–µ–Ω—ñ –æ—Ü—ñ–Ω–∫–∏ –ø–æ –º–æ–¥—É–ª—è—Ö</h3>
            <table class="mt-2 w-full text-sm border-t">
              <thead>
                <tr class="border-b">
                  <th class="text-left py-2 pr-3">–ú–æ–¥—É–ª—å</th>
                  <th class="text-left py-2 pr-3">–î–∞—Ç–∞</th>
                  <th class="text-left py-2 pr-3">–û—Ü—ñ–Ω–∫–∞ (1-12)</th>
                  <th class="text-left py-2 pr-3">–í–∏–∫–æ–Ω–∞–Ω–æ</th>
                </tr>
              </thead>
              <tbody>${rows}</tbody>
            </table>

            <div class="mt-6 text-xs text-slate-600">
              –î–∞–Ω—ñ —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–æ –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ –±—Ä–∞—É–∑–µ—Ä–∞.
            </div>
          </div>
        `;
        printArea.classList.remove("hidden");
        window.print();
        printArea.classList.add("hidden");
        printArea.innerHTML = "";
      });
    }

    function mount(html) { document.getElementById("app").innerHTML = html; }

    function route() {
      const hash = location.hash || "#/dashboard";
      const path = hash.replace("#","").split("?")[0];

      if (path === "/dashboard") return dashboardPage();
      if (path === "/modules") return modulesPage();
      if (path === "/workbook") return workbookPage();
      if (path === "/prompts") return promptsPage();
      if (path === "/export") return exportPage();

      return dashboardPage();
    }

    window.addEventListener("hashchange", route);
    route();
  </script>
</body>
</html>
